<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Gerenciador de Tarefas</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet" />
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #d3d3d3;
      margin: 0;
      padding: 0;
      text-align: center;
    }

    h1 {
      margin: 30px;
      font-size: 28px;
    }

    .task-card {
      background: #f0f0f0;
      margin: 20px auto;
      padding: 20px;
      border-radius: 20px;
      width: 80%;
      max-width: 400px;
      position: relative;
      text-align: left;
      transition: all 0.3s ease, height 0.3s ease; /* Suaviza altera√ß√µes de tamanho */
    }

    .urgent {
      background: #d32f2f;
      color: white;
      font-weight: bold;
      padding: 5px 10px;
      border-top-left-radius: 20px;
      border-top-right-radius: 20px;
    }

    .task-title {
      font-size: 1.2em;
      font-weight: bold;
      margin-top: 10px;
    }

    .category {
      color: #1a73e8;
      font-size: 0.9em;
      margin-top: 5px;
    }

    .category.escola {
      color: green;
    }

    .toggle-description {
      position: absolute;
      right: 20px;
      top: 55px;
      transform: translateY(-50%);
      background: white;
      border-radius: 50%;
      border: none;
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }

    .toggle-description i {
      font-size: 1.2em; /* Ajuste o tamanho do √≠cone */
      transition: transform 0.3s ease;
    }

    .description {
      margin-top: 15px;
      font-size: 0.95em;
      color: #444;
      overflow: hidden;
      max-height: 0; /* Altura inicial 0 */
      visibility: hidden; /* Torna invis√≠vel inicialmente */
      transition: max-height 0.5s ease-in-out, visibility 0.5s ease; /* Suaviza a transi√ß√£o */
    }

    .description.active {
      max-height: 500px; /* Altura m√°xima para expandir */
      visibility: visible; /* Torna vis√≠vel quando ativo */
    }

    .delete-btn {
      background: #d32f2f;
      color: white;
      border: none;
      padding: 8px 12px;
      margin-top: 10px;
      border-radius: 8px;
      cursor: pointer;
    }

    .bottom-menu {
      display: flex;
      justify-content: space-around;
      padding: 10px;
      background: white;
      position: fixed;
      bottom: 0;
      left: 0;
      width: 98.5%;
      box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
      border-radius: 20px 20px 0 0;
      z-index: 1000;
      transition: all 0.3s ease;
    }

    .bottom-menu button {
      background: #34527a;
      color: white;
      border: none;
      border-radius: 50%;
      width: 60px;
      height: 60px;
      scale: 0.9;
      font-size: 28px;
      cursor: pointer;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
      transition: all 0.3s ease, scale 0.3s ease;
    }

    .bottom-menu button:hover{
      background: #2b4463;
      scale: 1.05;
    }
    .bottom-menu button:active {
      background: #1e2a4d;
      scale: 0.9;
    }

    .hidden {
      display: none;
    }

    #nova-tarefa, #configuracoes {
      padding: 20px;
    }

    form input, form textarea, form button {
      margin: 10px 0;
      padding: 10px;
      font-size: 1em;
      width: 80%;
      max-width: 400px;
    }

    form button {
      background-color: #34527a;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
    }

    form button:hover {
      background-color: #2b4463;
    }
  </style>
</head>
<body>
  <h1>Hoje √© dia <span id="data-dia"></span></h1>

  <!-- P√°gina Principal -->
  <div id="main"></div>

  <!-- Nova Tarefa -->
  <div id="nova-tarefa" class="hidden">
    <h2>Nova Tarefa</h2>
    <form id="form-tarefa" onsubmit="criarTarefa(event)">
      <input type="text" id="titulo" placeholder="T√≠tulo da tarefa" required /><br>
      <input type="text" id="categoria" placeholder="Categoria (ex: Trabalho, Escola)" required /><br>
      <input type="date" id="prazo" /><br>
      <textarea id="descricao" placeholder="Descri√ß√£o detalhada"></textarea><br>
      <button type="submit">Adicionar</button>
    </form>
  </div>

  <!-- Configura√ß√µes -->
  <div id="configuracoes" class="hidden">
    <h2>Configura√ß√µes</h2>
    <button onclick="limparTarefas()">üóë Limpar todas as tarefas</button>
  </div>

  <!-- Menu inferior -->
  <div class="bottom-menu">
    <button onclick="mostrarAba('main')">üìÖ</button>
    <button onclick="mostrarAba('nova-tarefa')">Ôºã</button>
    <button onclick="mostrarAba('configuracoes')">‚öôÔ∏è</button>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      document.getElementById("data-dia").textContent = new Date().getDate();
      carregarTarefas();
    });

    function mostrarAba(aba) {
      document.getElementById("main").classList.add("hidden");
      document.getElementById("nova-tarefa").classList.add("hidden");
      document.getElementById("configuracoes").classList.add("hidden");
      document.getElementById(aba).classList.remove("hidden");
    }

    function criarTarefa(event) {
      event.preventDefault();
      const titulo = document.getElementById("titulo").value.trim();
      const categoria = document.getElementById("categoria").value.trim();
      const prazo = document.getElementById("prazo").value;
      const descricao = document.getElementById("descricao").value.trim();

      const novaTarefa = { titulo, categoria, prazo, descricao };
      const tarefas = JSON.parse(localStorage.getItem("tarefas") || "[]");
      tarefas.push(novaTarefa);
      localStorage.setItem("tarefas", JSON.stringify(tarefas));

      adicionarTarefaNaTela(novaTarefa, tarefas.length - 1);
      document.getElementById("form-tarefa").reset();
      mostrarAba("main");
    }

    function adicionarTarefaNaTela(tarefa, index) {
      const taskCard = document.createElement("div");
      taskCard.className = "task-card";

      const titleElem = document.createElement("div");
      titleElem.className = "task-title";
      titleElem.textContent = tarefa.titulo;

      const catElem = document.createElement("div");
      catElem.className = "category";
      catElem.textContent = tarefa.categoria;
      if (tarefa.categoria.toLowerCase() === "escola") {
        catElem.classList.add("escola");
      }

      const toggleBtn = document.createElement("button");
      toggleBtn.className = "toggle-description";
      toggleBtn.innerHTML = '<i class="fas fa-chevron-right"></i>'; // √çcone de seta para a direita
      toggleBtn.onclick = () => {
        descElem.classList.toggle("active");
        const icon = toggleBtn.querySelector("i");
        if (descElem.classList.contains("active")) {
          icon.style.transform = "rotate(90deg)"; // Rota√ß√£o para baixo
        } else {
          icon.style.transform = "rotate(-90deg)"; // Rota√ß√£o para a direita
        }
      };

      const descElem = document.createElement("div");
      descElem.className = "description";
      descElem.innerHTML = tarefa.descricao
        ? `<p>${tarefa.descricao.replace(/\n/g, "<br>")}</p>`
        : "<p>Sem descri√ß√£o.</p>";

      const deleteBtn = document.createElement("button");
      deleteBtn.className = "delete-btn";
      deleteBtn.textContent = "Excluir";
      deleteBtn.onclick = () => excluirTarefa(index);

      descElem.appendChild(deleteBtn);

      taskCard.appendChild(titleElem);
      taskCard.appendChild(catElem);
      taskCard.appendChild(toggleBtn);

      if (tarefa.prazo) {
        const prazoElem = document.createElement("div");
        prazoElem.style.cssText = "position: absolute; right: 15px; bottom: 15px; font-size: 0.8em; color: #666;";
        prazoElem.textContent = calcularDiasRestantes(tarefa.prazo);
        taskCard.appendChild(prazoElem);
      }

      taskCard.appendChild(descElem);
      document.getElementById("main").appendChild(taskCard);
    }

    function calcularDiasRestantes(dataPrazo) {
      const hoje = new Date();
      const prazo = new Date(dataPrazo);

      // Calcula a diferen√ßa em dias
      const diff = Math.ceil((prazo - hoje) / (1000 * 60 * 60 * 24));

      if (diff > 0) {
        return `Restam ${diff} dia${diff === 1 ? "" : "s"}.`;
      } else if (diff === 0) {
        return "O prazo √© hoje!";
      } else {
        const diasAtrasados = Math.abs(diff);
        return `Atrasado h√° ${diasAtrasados} dia${diasAtrasados === 1 ? "" : "s"}.`;
      }
    }

    function carregarTarefas() {
      const tarefas = JSON.parse(localStorage.getItem("tarefas") || "[]");
      tarefas.forEach((tarefa, index) => adicionarTarefaNaTela(tarefa, index));
    }

    function excluirTarefa(index) {
      const tarefas = JSON.parse(localStorage.getItem("tarefas") || "[]");
      tarefas.splice(index, 1);
      localStorage.setItem("tarefas", JSON.stringify(tarefas));
      document.getElementById("main").innerHTML = "";
      carregarTarefas();
    }

    function limparTarefas() {
      if (confirm("Tem certeza que deseja excluir todas as tarefas?")) {
        localStorage.removeItem("tarefas");
        document.getElementById("main").innerHTML = "";
      }
    }
  </script>
</body>
</html>
